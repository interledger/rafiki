import { LinkOut } from '@interledger/docs-design-system'

<div class="overflow-table">

### Required values

| Helm value name                  | Default                               | Description                                                                                                                                   |
| -------------------------------- | ------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `backend.auth.grantUrl`          | `http://rafiki-auth.rafiki-auth:3006` | The endpoint on your Open Payments authorization server to grant a request.                                                                   |
| `backend.auth.introspectionUrl`  | `http://rafiki-auth.rafiki-auth:3007` | The endpoint on your Open Payments authorization server to introspect an access token.                                                        |
| `backend.databaseUrl`            | _undefined_                           | The Postgres database URL of the database storing your resource data. Can be provided directly as a value or referenced from a secret.        |
| `backend.redisUrl`               | _undefined_                           | The Redis URL of the database handling ILP packet data. Can be provided directly as a value or referenced from a secret.                      |
| `backend.ilp.host`               | `http://rafiki-backend:3000`          | The public endpoint of your Open Payments resource server.                                                                                    |
| `backend.ilp.address`            | `test.rafiki-backend`                 | The ILP address of your Rafiki instance.                                                                                                      |
| `backend.ilp.connector`          | `http://rafiki-backend:3002`          | The ILP connector address where ILP packets are received.                                                                                     |
| `backend.ilp.streamSecret`       | `changeme`                            | The seed secret to generate shared STREAM secrets. Can be provided directly as a value or referenced from a secret.                           |
| `backend.key.id`                 | `rafiki-override-this-value`          | Your Rafiki instance's client key ID.                                                                                                         |
| `backend.key.pvk`                | `''`                                  | The private key pem file used. Must be provided as base64 encoded version of the pem file. If empty, a job will generate a new key pair.      |
| `backend.webhook.url`            | `http://wallet/webhooks/rafiki`       | Your endpoint that consumes webhook events.                                                                                                   |
| `backend.webhookSignatureSecret` | `changeme`                            | The secret to generate request header signatures for webhook event requests. Can be provided directly as a value or referenced from a secret. |

### Conditionally required values

| Helm value name        | Default                   | Description                                                                                                                                           |
| ---------------------- | ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| `backend.instanceName` | `rafiki-backend-changeme` | Your Rafiki instance's name used to communicate for auto-peering and/or telemetry. Required when auto-peering and/or telemetry is enabled.            |
| `backend.trustProxy`   | `true`                    | Must be set to `true` when running Rafiki behind a proxy. When `true`, the `X-Forwarded-Proto` header is used to determine if connections are secure. |

### Optional values

| Helm value name                                  | Default                    | Description                                                                                                                                                                                                    |
| ------------------------------------------------ | -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `backend.nodeEnv`                                | `production`               | The type of node environment: `development`, `test`, or `production`.                                                                                                                                          |
| `backend.logLevel`                               | `info`                     | Pino log level                                                                                                                                                                                                 |
| `backend.useTigerbeetle`                         | `false`                    | When `true`, a TigerBeetle database is used for accounting. When `false`, a Postgres database is used.                                                                                                         |
| `backend.secrets.create`                         | `false`                    | If true, the chart will create a secret with the name of the release. If false, you must create the secret manually.                                                                                           |
| `backend.rates.url`                              | `""`                       | The endpoint your Rafiki instance uses to request exchange rates.                                                                                                                                              |
| `backend.webhook.timeout`                        | `200`                      | The time, in milliseconds, that WALLET_ADDRESS_WORKERS wait until checking the empty wallet address request queue again.                                                                                       |
| `backend.walletAddressRedirectHtmlPage`          | `''`                       | This feature is experimental and may change in future versions.                                                                                                                                                |
| `backend.slippage`                               | `0.01` (1%)                | The accepted ILP rate fluctuation.                                                                                                                                                                             |
| `backend.withdrawalThrottleDelay`                | `''`                       | The delay in liquidity withdrawal processing. Unit ms.                                                                                                                                                         |
| `backend.lifetime.exchangeRate`                  | `15000`                    | The time, in milliseconds, the exchange rates you provide via the EXCHANGE_RATES_URL are valid.                                                                                                                |
| `backend.lifetime.quote`                         | `300000` (5 minutes)       | The time, in milliseconds, an Open Payments quote is valid for.                                                                                                                                                |
| `backend.lifetime.webhook`                       | `200`                      | The time, in milliseconds, that your Rafiki instance will wait for a 200 response from your webhook endpoint. If a 200 response is not received, Rafiki will time out and try to send the webhook event again. |
| `backend.workers.incomingPayment`                | `1`                        | The number of workers processing incoming payment requests.                                                                                                                                                    |
| `backend.workers.outgoingPayment`                | `1`                        | The number of workers processing outgoing payment requests.                                                                                                                                                    |
| `backend.workers.paymentPointer`                 | `1`                        | The number of workers processing payment pointer requests.                                                                                                                                                     |
| `backend.workers.webhook`                        | `1`                        | The number of workers processing webhook events.                                                                                                                                                               |
| `backend.workerIdle`                             | `200`                      | The time, in milliseconds, that workers will wait until checking an empty queue again.                                                                                                                         |
| `backend.idempotency.keyTTL`                     | `86400000` (24 hours)      | The TTL, in milliseconds, for idempotencyKey on GraphQL mutations on the Backend Admin API.                                                                                                                    |
| `backend.idempotency.keyLock`                    | `2000`                     | The TTL, in milliseconds, for idempotencyKey concurrency lock on GraphQL mutations on the Backend Admin API.                                                                                                   |
| `backend.telemetry.enabled`                      | `false`                    | Enables the telemetry service on Rafiki.                                                                                                                                                                       |
| `backend.telemetry.livenet`                      | `false`                    | When true, telemetry is enabled for livenet.                                                                                                                                                                   |
| `backend.autoPeering.enabled`                    | `false`                    | Enables the auto-peering service on Rafiki.                                                                                                                                                                    |
| `backend.port.admin`                             | `3001`                     | The port of your Backend Auth API server.                                                                                                                                                                      |
| `backend.port.connector`                         | `3002`                     | The port of the ILP connector for sending packets via ILP over HTTP.                                                                                                                                           |
| `backend.port.openPayments`                      | `3000`                     | The port of your Open Payments resource server.                                                                                                                                                                |
| `backend.port.autoPeering`                       | `3005`                     | If auto-peering is enabled, the server will use this port.                                                                                                                                                     |
| `backend.replicaCount`                           | `1`                        | Currently rafiki should run with a single replica, so this value is set to 1.                                                                                                                                  |
| `backend.nodeSelector`                           | `{}`                       | Can be used to ensure rafiki-backend is deployed on a specific node or set of nodes.                                                                                                                           |
| `backend.serviceAccount.create`                  | `false`                    | If true, a ServiceAccount will be created with the specified name and annotations.                                                                                                                             |
| `backend.serviceAccount.annotations`             | `{}`                       | Annotations to add to the ServiceAccount.                                                                                                                                                                      |
| `backend.serviceAccount.name`                    | `""`                       | The name of the ServiceAccount to use.                                                                                                                                                                         |
| `backend.service.name`                           | `service`                  | The name of the service.                                                                                                                                                                                       |
| `backend.service.annotations`                    | `{}`                       | Annotations to add to the service.                                                                                                                                                                             |
| `backend.service.type`                           | `ClusterIP`                | The type of Kubernetes service.                                                                                                                                                                                |
| `backend.service.ports`                          | Multiple ports             | Service port configuration for open-payments (3000), admin (3001), connector (3002), and auto-peering (3005) endpoints.                                                                                        |
| `backend.configmap`                              | `files/config.yaml`        | The template for generating the default env configmap.                                                                                                                                                         |
| `backend.secretsGenFile`                         | `files/secret.yaml`        | The template for generating the env secrets.                                                                                                                                                                   |
| `backend.containers.name`                        | `server`                   | The name of the main container.                                                                                                                                                                                |
| `backend.containers.resources.requests.memory`   | `256Mi`                    | The minimum amount of memory required by the container.                                                                                                                                                        |
| `backend.containers.resources.requests.cpu`      | `1`                        | The minimum amount of CPU required by the container.                                                                                                                                                           |
| `backend.containers.resources.limits.memory`     | `2048Mi`                   | The maximum amount of memory the container can use.                                                                                                                                                            |
| `backend.containers.resources.limits.cpu`        | `4`                        | The maximum amount of CPU the container can use.                                                                                                                                                               |
| `backend.containers.readinessProbe.httpGet.path` | `/healthz`                 | The path for the readiness probe HTTP check.                                                                                                                                                                   |
| `backend.containers.readinessProbe.httpGet.port` | `3000`                     | The port for the readiness probe HTTP check.                                                                                                                                                                   |
| `backend.containers.livenessProbe.httpGet.path`  | `/healthz`                 | The path for the liveness probe HTTP check.                                                                                                                                                                    |
| `backend.containers.livenessProbe.httpGet.port`  | `3000`                     | The port for the liveness probe HTTP check.                                                                                                                                                                    |
| `backend.containers.ports`                       | Multiple ports             | Container port configuration for open-payments (3000), admin (3001), connector (3002), and auto-peering (3005) endpoints.                                                                                      |
| `backend.containers.volumeMounts`                | Volume mount configuration | Mounts the keys volume at /mnt/keys as read-only.                                                                                                                                                              |

</div>
